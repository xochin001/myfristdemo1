{"version":3,"sources":["webpack:///F:/陈星的微信小程序/uni_瑞宝星/mpvue-wxparse/src/components/wxParseImg.vue?df23","webpack:///F:/陈星的微信小程序/uni_瑞宝星/mpvue-wxparse/src/components/wxParseImg.vue?86c8","webpack:///F:/陈星的微信小程序/uni_瑞宝星/mpvue-wxparse/src/components/wxParseImg.vue?a65c","webpack:///F:/陈星的微信小程序/uni_瑞宝星/mpvue-wxparse/src/components/wxParseImg.vue?34d8","webpack:///F:/陈星的微信小程序/uni_瑞宝星/mpvue-wxparse/src/components/wxParseImg.vue"],"names":["name","data","newStyleStr","preview","props","node","type","Object","default","methods","wxParseImgTap","e","src","target","dataset","$host","wxParseImgLoad","mp","detail","width","height","recal","wxAutoImageCal","imageheight","imageWidth","attr","padding","mode","styleStr","imageHeightStyle","originalWidth","originalHeight","windowWidth","$screen","results","removeImageUrl"],"mappings":"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","file":"mpvue-wxparse/src/components/wxParseImg.js","sourcesContent":["import { render, staticRenderFns } from \"./wxParseImg.vue?vue&type=template&id=3e7a05ac&\"\nimport script from \"./wxParseImg.vue?vue&type=script&lang=js&\"\nexport * from \"./wxParseImg.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"F:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('3e7a05ac', component.options)\n    } else {\n      api.reload('3e7a05ac', component.options)\n    }\n    module.hot.accept(\"./wxParseImg.vue?vue&type=template&id=3e7a05ac&\", function () {\n      api.rerender('3e7a05ac', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"陈星的微信小程序/uni_瑞宝星/mpvue-wxparse/src/components/wxParseImg.vue\"\nexport default component.exports","export * from \"-!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxParseImg.vue?vue&type=template&id=3e7a05ac&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxParseImg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../工具/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxParseImg.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: 'wxParseImg',\n  data() {\n    return {\n      newStyleStr: '',\n      preview: true,\n    };\n  },\n  props: {\n    node: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  methods: {\n    wxParseImgTap(e) {\n      if (!this.preview) return;\n      const { src } = e.target.dataset;\n      if (!src) return;\n      this.node.$host.preview(src, e);\n    },\n    // 图片视觉宽高计算函数区\n    wxParseImgLoad(e) {\n      const { src } = e.target.dataset;\n      if (!src) return;\n      const { width, height } = e.mp.detail;\n      const recal = this.wxAutoImageCal(width, height);\n      const { imageheight, imageWidth } = recal;\n      const { padding, mode } = this.node.attr;\n      const { styleStr } = this.node;\n      const imageHeightStyle = mode === 'widthFix' ? '' : `height: ${imageheight}px;`;\n      this.newStyleStr = `${styleStr}; ${imageHeightStyle}; width: ${imageWidth}px; padding: 0 ${+padding}px;`;\n    },\n    // 计算视觉优先的图片宽高\n    wxAutoImageCal(originalWidth, originalHeight) {\n      // 获取图片的原始长宽\n      const { padding } = this.node.attr;\n      const windowWidth = this.node.$screen.width - (2 * padding);\n      const results = {};\n\n      if (originalWidth < 60 || originalHeight < 60) {\n        const { src } = this.node.attr;\n        this.node.$host.removeImageUrl(src);\n        this.preview = false;\n      }\n\n      // 判断按照那种方式进行缩放\n      if (originalWidth > windowWidth) {\n        // 在图片width大于手机屏幕width时候\n        results.imageWidth = windowWidth;\n        results.imageheight = windowWidth * (originalHeight / originalWidth);\n      } else {\n        // 否则展示原来的数据\n        results.imageWidth = originalWidth;\n        results.imageheight = originalHeight;\n      }\n\n      return results;\n    },\n  },\n};\n"],"sourceRoot":""}